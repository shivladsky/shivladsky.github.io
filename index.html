<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VoxPaint</title>
    <link rel="icon" href="data:," />
    <link
      href="https://fonts.googleapis.com/css2?family=VT323&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./assets/css/styles.css" />
  </head>
  <body>
    <!-- Basic pageview tracking -->
    <script type="module">
      (async()=>{try{await fetch("https://shivlogger.shivladsky.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:"pageview",event_source:"voxpaint",timestamp:Math.floor(Date.now()/1e3),nonce:crypto.randomUUID(),url:location.href,user_agent:navigator.userAgent,referrer:document.referrer})})}catch(e){console.warn("Tracking failed:",e)}})();
      </script>

    <canvas id="viewportCanvas"></canvas>

    <div id="titleOverlay">VoxPaint</div>

    <!-- Menubar (always at the top) -->
    <div id="menuBar">
      <div class="menu-item">
        <a href="#" class="menu-label" id="fileMenu">File</a>
        <div class="dropdown">
          <a href="#" class="dropdown-item" id="newFile">New</a>
          <a href="#" class="dropdown-item" id="openFile">Open...</a>
          <a href="#" class="dropdown-item" id="saveFile">Save As...</a>
        </div>
      </div>

      <div class="menu-item">
        <a href="#" class="menu-label" id="editMenu">Edit</a>
        <div class="dropdown">
          <a href="#" class="dropdown-item" id="undoAction">Undo</a>
          <a href="#" class="dropdown-item" id="redoAction">Redo</a>
        </div>
      </div>

      <div class="menu-item">
        <a href="#" class="menu-label" id="viewMenu">View</a>
        <div class="dropdown">
          <a href="#" class="dropdown-item" id="toggleGrid">Show Voxel Grid</a>
          <a href="#" class="dropdown-item" id="jumpToTop">Jump to Top</a>
          <a href="#" class="dropdown-item" id="upOneLayer">Up One Layer</a>
          <a href="#" class="dropdown-item" id="downOneLayer">Down One Layer</a>
          <a href="#" class="dropdown-item" id="jumpToBottom">Jump to Bottom</a>
          <a href="#" class="dropdown-item" id="toggleXray">X-Ray Mode</a>
        </div>
      </div>

      <div class="menu-item">
        <a href="#" class="menu-label" id="paletteMenu">Palette</a>
        <div class="dropdown">
          <!-- Built-in palettes get populated dynamically here from menubar.mjs -->
          <a href="#" class="dropdown-item" id="importPalette">Load From File...</a>
          <a href="https://lospec.com/palette-list" target="_blank" rel="noopener noreferrer" class="dropdown-item" id="getMorePalettes">Get More...</a>
        </div>
      </div>

      <div class="menu-item">
        <a href="#" class="menu-label" id="toolsMenu">Tools</a>
        <div class="dropdown">
          <a href="#" class="dropdown-item" id="togglePaint">Paint</a>
          <a href="#" class="dropdown-item" id="toggleOverpaint">Overpaint</a>
          <a href="#" class="dropdown-item" id="toggleFill">Fill</a>
        </div>
      </div>
    </div>

  </div>

    <div id="colorPalettePanel"></div>
    <input type="file" id="paletteFileInput" accept=".pal,.txt,.gpl,.ase,.hex" style="display: none;" />

    <script type="module" src="./assets/js/script.mjs"></script>
    <script type="module" src="./assets/js/menubar.mjs"></script>
    <script type="module" src="./assets/js/keyboard.mjs"></script>
  </body>
</html>
